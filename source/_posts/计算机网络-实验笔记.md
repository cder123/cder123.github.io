---
title: 计算机网络-实验笔记
tag: 网络
categories:
  - [后端,操作系统,Windows使用]
  - 厦理
  - 网络工程
---



# 计算机网络-实验笔记

[toc]



## 零、虚拟机添加多张网卡

1.   VM软件的“编辑”  =》 “虚拟网络编辑器” =》“更改设置” =》“添加网络” =》选择网卡

![image-20211019130322558](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019130322558.png)



2.   将新添加的网卡设置为仅主机模式，并去掉DHCP分配选项：

![image-20211019130442547](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019130442547.png)



3.   打开虚拟机的硬件设置，添加网卡并接入到刚才添加的虚拟网卡：

![image-20211019130736639](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019130736639.png)

## 一、IIS 的安装与配置

### 1、关闭Windows Server R2 的防火墙

服务器管理器 =》 转到Windows防火墙：

![image-20210928131105326](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928131105326.png)



防火墙的属性：

![image-20210928131225547](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928131225547.png)



关闭 3个设置：

![image-20210928131353729](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928131353729.png)



关闭 IE-增强ESC：

![image-20210928131626099](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928131626099.png)



### 2、关闭 Windows  XP 的防火墙

控制面板=》防火墙

![image-20210928165743685](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928165743685.png)





---



### 3、安装 IIS + DNS



![image-20210928170540026](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928170540026.png)





![image-20210928170615534](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928170615534.png)



![image-20210928170633237](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928170633237.png)



![image-20210928170650911](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928170650911.png)



其他保持默认，勾选”基本身份验证“ 和 ”IP 和域限制“：

![image-20210928170721315](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928170721315.png)



![image-20210928170836173](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928170836173.png)





---





### 4、利用 IIS 发布多个网站（3种）



创建站点：

![image-20210928173822299](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928173822299.png)





---





#### 4.1 利用多个 端口发布多个网站

![image-20210928173927262](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928173927262.png)



---



#### 4.2 利用多个 IP发布多个网站



添加多个IP：

![image-20210928174942959](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928174942959.png)



![image-20210928175022747](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928175022747.png)



![image-20210928175428652](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928175428652.png)









---



#### 4.3 利用多个域名（主机名）发布 多个网站



注意：需要先安装、配置DNS服务器。









---



### 5、IIS的基本身份验证

![image-20210928180850167](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928180850167.png)



禁用匿名身份验证，启动基本身份验证：（基本身份验证需要配合OS的用户来使用）

![image-20210928180912662](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928180912662.png)



创建用户：

![image-20210928181145781](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928181145781.png)



![image-20210928182301301](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928182301301.png)



---



### 6、IP区域限制



例如：拒绝192.168.1.200的主机访问Win Serv2008 的默认站点：

![image-20210928182633549](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928182633549.png)



![image-20210928182716990](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928182716990.png)



![image-20210928182901164](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20210928182901164.png)







---





## 二、DNS服务器的安装与配置



### 1、DNS服务器的安装

见：上一章节的第3小节





---



### 2、DNS



创建正向查找的主要区域：

![img](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/clip_image002.jpg)



新建用于解析服务器ServerID的FQDN名称的主机记录：

![image-20211006080701537](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211006080701537.png)



服务器ServerID的别名记录，分别为WWW和FTP：

![image-20211006080718362](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211006080718362.png)





## 三、DHCP服务器的安装与配置



### 1、DHCP服务器的安装

![image-20211019123108917](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019123108917.png)

一直下一步：

![image-20211019123151852](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019123151852.png)

禁止分配 ipv6：

![image-20211019123243891](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019123243891.png)

![image-20211019123340238](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019123340238.png)





### 2、配置DHCP

1.   打开DHCP管理界面：开始 -》 管理工具 -》DHCP

2.    新建作用域（即：要分配的IP地址池）：注意分配的ip地址池必须与DHCP服务器处于同一网段

     ![image-20211019123625949](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019123625949.png)

3.   随便起1个作用域的名称
4.   输入要分配的地址池：

![image-20211019123930862](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019123930862.png)

5.   输入要在分配的地址池中排除的ip地址（即：指定不分配的ip地址）：

![image-20211019124021190](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019124021190.png)

6.   指定租约：

![image-20211019124109175](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019124109175.png)

7.   指定网关、DNS和Wins:

![image-20211019124155956](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019124155956.png)

![image-20211019124330234](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019124330234.png)

8.   激活作用域：

![image-20211019124425510](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019124425510.png)



### 3、配置保留地址（利用PC的MAC地址单独给该PC预留 IP）：

![image-20211019124650109](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019124650109.png)

![image-20211019124959095](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211019124959095.png)









## 四、AD活动目录的安装与配置



### 1、安装AD

1.   win + R
2.   输入：`dcpromo`
3.   回车
4.   根据需要设置选项



### 2、设置组策略（可选）

修改密码长度和密码复杂度：

-   win + R
-   gpmc.msc
-   进行**下图**的设置
-   cmd中输入命令，刷新组策略使其生效：`gpupdate /force`

![image-20211026190029674](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211026190029674.png)

![image-20211026190330067](../../../../AppData/Roaming/Typora/typora-user-images/image-20211026190330067.png)







## 五、FTP服务器的安装与配置



### 1、安装FTP

安装IIS时，选中安装FTP服务的相关模块，具体安装步骤见<font style="color:red;">IIS服务器的安装步骤</font>



### 2、FTP服务器的配置

配置步骤：

-   打开IIS：

![image-20211124150439787](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124150439787.png)

-   右键 “网站” =》点击 “添加FTP站点” =》 输入FTP站点的名称和存储的物理位置：

![image-20211124150515341](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124150515341.png)

-   填写FTP服务器的IP，无SSL：

![image-20211124150610095](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124150610095.png)

-   勾选身份验证，点击“完成”：

![image-20211124150813358](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124150813358.png)

-   创建专门用于访问FTP的用户账号：

![image-20211124152251294](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124152251294.png)

![image-20211124152324461](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124152324461.png)

-   设置FTP的访问规则：

![image-20211124152400686](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124152400686.png)

![image-20211124152419096](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124152419096.png)



-   设置提示消息（仅命令行访问时）：

![image-20211124152813864](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124152813864.png)

![image-20211124152831102](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124152831102.png)

-   cmd 访问FTP服务器：（格式：ftp ip地址）

![image-20211124152633929](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124152633929.png)

-   右键FTP站点，设置虚拟目录（可选）：

![image-20211124153042990](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124153042990.png)

![image-20211124153132935](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124153132935.png)

-   访问虚拟目录（ftp://IP地址/虚拟目录名）：

![image-20211124153414774](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124153414774.png)





## 六、路由服务



### 1、安装“路由与远程服务”角色

-   打开服务器管理器
-   添加角色
-   勾选“路由策略和访问服务”
-   勾选前2个大复选框
-   安装
-   ![image-20211124153810860](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124153810860.png)







### 2、配置路由服务（示例为静态路由）



-   打开“路由与远程服务”：

![image-20211124154102563](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124154102563.png)

![image-20211124154248869](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124154248869.png)

-   鼠标右键单击“主机名（本地）”，选择“配置并启用路由和远程访问”项，弹出安装向导，下一步

![image-20211124154449319](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124154449319.png)

-   勾选“LAN路由”，下一步直到完成：

![image-20211124154509441](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124154509441.png)

-   添加一条静态路由条目（客户端的路由器与服务端的路由器均需要配置相互访问的路由条目）：

![image-20211124154810054](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124154810054.png)

![image-20211124154917192](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124154917192.png)





## 七、VPN



### 1、安装“网络策略与访问服务”角色

-   主要包括：【路由 + 策略 】2个模块，具体过程见上面的路由服务章节的安装过程

![image-20211124155259300](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124155259300.png)



### 2、配置VPN

实验前提：【Server的内网网卡：192.168.1.0/24 ；外网网卡：192.168.2.0/24。XP接入192.168.2.0网段】

-   服务端新建一个用于VPN访问的账户（例如：用户名a,密码a）：

![image-20211124152251294](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124152251294.png)

-   设置该账户的VPN接入权限：

![image-20211124155810970](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124155810970.png)



-   设置VPN策略（配置NAP）：

![image-20211124155919165](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124155919165.png)

![image-20211124160032775](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124160032775.png)



-   选择连接类型为VPN：

![image-20211124160137567](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124160137567.png)



-   添加Radius客户端（VPN服务器要分配的内网网段）：

![image-20211124160413454](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124160413454.png)

![image-20211124160442484](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124160442484.png)



-   设置VPN的路由远程访问：

![image-20211124154102563](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124154102563.png)

-   鼠标右击服务器图标，单击“配置并启用路由和远程访问”启动“路由和远程访问服务器安装向导”，下一步

![image-20211124154248869](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124154248869.png)



-   选择“远程访问（VPN）”，VPN：

![image-20211124160829219](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124160829219.png)

![image-20211124160934050](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124160934050.png)



-   选中外网网段，点击“下一步”：

![image-20211124161048245](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124161048245.png)



-   指定VPN访问时分配的内网地址范围，一直下一步直到结束：

![image-20211124161135746](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124161135746.png)

![image-20211124161207568](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124161207568.png)



![image-20211124161222215](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124161222215.png)



-   XP连接到VPN：

![image-20211124161622630](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124161622630.png)

![image-20211124161644688](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124161644688.png)



![image-20211124161708367](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124161708367.png)

![image-20211124161755270](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124161755270.png)

![image-20211124161833121](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124161833121.png)

![image-20211124161855168](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124161855168.png)

![image-20211124162019864](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124162019864.png)

![image-20211124162044420](https://cyw-imgbed.oss-cn-hangzhou.aliyuncs.com/img/image-20211124162044420.png)

